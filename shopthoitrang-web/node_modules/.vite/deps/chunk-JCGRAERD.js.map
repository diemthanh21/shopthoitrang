{
  "version": 3,
  "sources": ["../../antd/es/_util/ActionButton.js"],
  "sourcesContent": ["\"use client\";\n\nimport * as React from 'react';\nimport useState from \"rc-util/es/hooks/useState\";\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\nconst isThenable = thing => {\n  return typeof (thing === null || thing === void 0 ? void 0 : thing.then) === 'function';\n};\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const onInternalClose = (...args) => {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, args);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _a;\n        (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus({\n          preventScroll: true\n        });\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then((...args) => {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, args);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      // Do not throw if is `await` mode\n      if (isSilent === null || isSilent === void 0 ? void 0 : isSilent()) {\n        return;\n      }\n      return Promise.reject(e);\n    });\n  };\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!isThenable(returnValueOfOnOk)) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: buttonRef\n  }), children);\n};\nexport default ActionButton;"],
  "mappings": ";;;;;;;;;;;;;;;AAEA,YAAuB;AAIvB,IAAM,aAAa,WAAS;AAC1B,SAAO,QAAQ,UAAU,QAAQ,UAAU,SAAS,SAAS,MAAM,UAAU;AAC/E;AACA,IAAM,eAAe,WAAS;AAC5B,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI;AACJ,QAAM,aAAmB,aAAO,KAAK;AACrC,QAAM,YAAkB,aAAO,IAAI;AACnC,QAAM,CAAC,SAAS,UAAU,IAAI,aAAS,KAAK;AAC5C,QAAM,kBAAkB,IAAI,SAAS;AACnC,cAAU,QAAQ,UAAU,SAAS,SAAS,MAAM,MAAM,QAAQ,IAAI;AAAA,EACxE;AACA,EAAM,gBAAU,MAAM;AACpB,QAAI,YAAY;AAChB,QAAI,WAAW;AACb,kBAAY,WAAW,MAAM;AAC3B,YAAI;AACJ,SAAC,KAAK,UAAU,aAAa,QAAQ,OAAO,SAAS,SAAS,GAAG,MAAM;AAAA,UACrE,eAAe;AAAA,QACjB,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AACA,WAAO,MAAM;AACX,UAAI,WAAW;AACb,qBAAa,SAAS;AAAA,MACxB;AAAA,IACF;AAAA,EACF,GAAG,CAAC,CAAC;AACL,QAAM,oBAAoB,uBAAqB;AAC7C,QAAI,CAAC,WAAW,iBAAiB,GAAG;AAClC;AAAA,IACF;AACA,eAAW,IAAI;AACf,sBAAkB,KAAK,IAAI,SAAS;AAClC,iBAAW,OAAO,IAAI;AACtB,sBAAgB,MAAM,QAAQ,IAAI;AAClC,iBAAW,UAAU;AAAA,IACvB,GAAG,OAAK;AAEN,iBAAW,OAAO,IAAI;AACtB,iBAAW,UAAU;AAErB,UAAI,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,GAAG;AAClE;AAAA,MACF;AACA,aAAO,QAAQ,OAAO,CAAC;AAAA,IACzB,CAAC;AAAA,EACH;AACA,QAAM,UAAU,OAAK;AACnB,QAAI,WAAW,SAAS;AACtB;AAAA,IACF;AACA,eAAW,UAAU;AACrB,QAAI,CAAC,UAAU;AACb,sBAAgB;AAChB;AAAA,IACF;AACA,QAAI;AACJ,QAAI,WAAW;AACb,0BAAoB,SAAS,CAAC;AAC9B,UAAI,4BAA4B,CAAC,WAAW,iBAAiB,GAAG;AAC9D,mBAAW,UAAU;AACrB,wBAAgB,CAAC;AACjB;AAAA,MACF;AAAA,IACF,WAAW,SAAS,QAAQ;AAC1B,0BAAoB,SAAS,KAAK;AAElC,iBAAW,UAAU;AAAA,IACvB,OAAO;AACL,0BAAoB,SAAS;AAC7B,UAAI,CAAC,WAAW,iBAAiB,GAAG;AAClC,wBAAgB;AAChB;AAAA,MACF;AAAA,IACF;AACA,sBAAkB,iBAAiB;AAAA,EACrC;AACA,SAA0B,oBAAc,gBAAQ,OAAO,OAAO,CAAC,GAAG,mBAAmB,IAAI,GAAG;AAAA,IAC1F;AAAA,IACA;AAAA,IACA;AAAA,EACF,GAAG,aAAa;AAAA,IACd,KAAK;AAAA,EACP,CAAC,GAAG,QAAQ;AACd;AACA,IAAO,uBAAQ;",
  "names": []
}
